//
//  MDFTextView.m
//  JDBClient
//
//  Created by jinzhanxie on 15/1/8.
//  Copyright (c) 2015å¹´ JDB. All rights reserved.
//

#import "MDFTextView.h"

@interface MDFTextView ()

@property (nonatomic, strong) UILabel *placeholderLabel;

@end

@implementation MDFTextView

- (instancetype)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self setupSubviews];
    }
    return self;
}

- (instancetype)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:coder];
    if (self) {
        [self setupSubviews];
    }
    return self;
}

- (void)setupSubviews
{
    //default config
    _placeholderLabel = [UILabel mdf_labelWithTextAlignment:NSTextAlignmentLeft autoLayout:NO];
    _placeholderLabel.frame = CGRectMake(0.0f, 6.0f, self.width, 16);
    _placeholderLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    self.placeholderLabel.textColor = [UIColor jdb_colorForKey:@"c8cacc"];
    self.placeholderLabel.font = [UIFont systemFontOfSize:14.0f];
    [self addSubview:self.placeholderLabel];
}

- (void)setText:(NSString *)text
{
    [super setText:text];
    
    self.placeholderLabel.hidden = (self.text.length != 0);
}

- (void)setPlaceholder:(NSString *)placeHolder
{
    _placeholder = placeHolder;
    self.placeholderLabel.text = placeHolder;
}

- (BOOL)becomeFirstResponder
{
    BOOL superBecomeFirstResponder = [super becomeFirstResponder];
    
    if (self.isFirstResponder) {
        self.placeholderLabel.hidden = YES;
    }
    else{
        self.placeholderLabel.hidden = (self.text.length != 0);
    }
    
    return superBecomeFirstResponder;
}

- (BOOL)resignFirstResponder
{
    BOOL superResignFirstResponder = [super resignFirstResponder];
    
    if (self.isFirstResponder) {
        self.placeholderLabel.hidden = YES;
    }
    else{
        self.placeholderLabel.hidden = (self.text.length != 0);
    }
    
    return superResignFirstResponder;
}

@end
